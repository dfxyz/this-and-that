<source>
    @type forward
    port 24224
</source>

<filter *>
    @type parser
    key_name log
    reserve_data true
    remove_key_name_field true
    <parse>
        @type regexp
        expression /^(?<datetime>[^|]*)\|(?<level>[^|]*)\|(?<caller>[^|]*)\|(?<message>.*)$/
    </parse>
</filter>

<match *>
    @type elasticsearch
    host elasticsearch
    port 9200
    logstash_format true
    logstash_prefix fluentd
    logstash_dateformat %Y%m%d
    <buffer>
        flush_interval 1s
    </buffer>
</match>
